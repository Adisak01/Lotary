<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MMORPG Prototype</title>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body, html {
            margin: 0;
            padding: 0;
            height: 100%;
            overflow: hidden; /* ล็อคไม่ให้เลื่อน */
            background: #1c1c1c;
        }
        canvas {
            display: block;
            margin: auto;
            background-color: #333;
        }
        #controller {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        .btn-control {
            width: 60px;
            height: 60px;
            font-size: 20px;
            margin: 5px;
            border-radius: 50%;
        }
        #attackButton {
            margin-top: 10px;
        }
        h1, p {
            color: white;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.8);
        }
        .controller-container {
            display: flex;
            justify-content: center;
        }
        .btn-primary {
            background-color: #007bff;
            border: none;
        }
        .btn-danger {
            background-color: #dc3545;
            border: none;
        }
    </style>
</head>
<body>
    <h1 class="mt-3 text-center">MMORPG Prototype</h1>
    <p class="text-center">ควบคุมตัวละครด้วยปุ่มและโจมตีมอนสเตอร์</p>
    <canvas id="gameCanvas" width="800" height="500"></canvas>
    
    <div id="controller" class="controller-container">
        <div>
            <button class="btn btn-primary btn-control" id="upBtn">↑</button><br>
            <button class="btn btn-primary btn-control" id="leftBtn">←</button>
            <button class="btn btn-primary btn-control" id="downBtn">↓</button><br>
            <button class="btn btn-primary btn-control" id="rightBtn">→</button>
        </div>
        <div>
            <button class="btn btn-danger btn-control" id="attackButton">Attack</button>
        </div>
    </div>

    <p id="status" class="text-center"></p>
    <p id="inventory" class="text-center"></p>

    <script src="https://cdn.jsdelivr.net/npm/three@0.133.0/build/three.min.js"></script>
    <script>
        // ตั้งค่า scene ของ Three.js
        const scene = new THREE.Scene();
        const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
        const renderer = new THREE.WebGLRenderer({ canvas: document.getElementById('gameCanvas') });
        renderer.setSize(window.innerWidth, window.innerHeight);
        document.body.appendChild(renderer.domElement);

        // สร้างแสงในเกม
        const light = new THREE.AmbientLight(0x404040); // สีเทาอ่อน
        scene.add(light);

        // ตัวละคร 3D
        const geometry = new THREE.BoxGeometry(1, 1, 1);
        const material = new THREE.MeshBasicMaterial({ color: 0x00ff00 });
        const player = new THREE.Mesh(geometry, material);
        scene.add(player);

        camera.position.z = 5;

        // มอนสเตอร์ 3D
        const monsterGeometry = new THREE.SphereGeometry(0.5, 32, 32);
        const monsterMaterial = new THREE.MeshBasicMaterial({ color: 0xff0000 });
        const monsters = [];
        for (let i = 0; i < 3; i++) {
            const monster = new THREE.Mesh(monsterGeometry, monsterMaterial);
            monster.position.set(Math.random() * 5 - 2.5, Math.random() * 3 - 1.5, Math.random() * 2 - 2);
            monsters.push(monster);
            scene.add(monster);
        }

        // เคลื่อนที่ตัวละคร
        let moveLeft = false, moveRight = false, moveUp = false, moveDown = false;
        
        document.getElementById("upBtn").addEventListener("click", () => moveUp = true);
        document.getElementById("downBtn").addEventListener("click", () => moveDown = true);
        document.getElementById("leftBtn").addEventListener("click", () => moveLeft = true);
        document.getElementById("rightBtn").addEventListener("click", () => moveRight = true);

        // การโจมตี
        function attackMonster() {
            for (let i = 0; i < monsters.length; i++) {
                let m = monsters[i];
                if (Math.abs(player.position.x - m.position.x) < 1 && Math.abs(player.position.y - m.position.y) < 1) {
                    m.material.color.set(0x00ff00);  // เปลี่ยนสีมอนสเตอร์เมื่อโจมตี
                }
            }
        }

        // เริ่มเกม
        function animate() {
            requestAnimationFrame(animate);

            if (moveLeft) player.position.x -= 0.1;
            if (moveRight) player.position.x += 0.1;
            if (moveUp) player.position.y += 0.1;
            if (moveDown) player.position.y -= 0.1;

            renderer.render(scene, camera);
        }
        animate();

        // กดปุ่มโจมตี
        document.getElementById("attackButton").addEventListener("click", () => {
            attackMonster();
        });
    </script>
</body>
</html>
